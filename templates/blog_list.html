{% extends 'base.html' %}
{%load static%}

{% block content %}
<div class="container mt-5">
    <h2 class="mb-4 text-primary">Blog List</h2>
    <div class="list-group">
        {% for blog in blog_list %}
        <div class="list-group-item">
            <h5>
                <a href="{% url 'blog:blog_detail' blog.id %}" style="text-decoration: none; color: #2C4080;">{{ blog.title }}</a>
            </h5>
            <p class="card-text text-muted">
                {% if blog.author.profile_picture %}
                    <img src="{{ blog.author.profile_picture.url }}" alt="Profile" class="rounded-circle" width="35" height="35">
                {% else %}
                    <img src="{% static 'images/360_F_724597608_pmo5BsVumFcFyHJKlASG2Y2KpkkfiYUU.jpg' %}" alt="Avatar" class="rounded-circle" width="35" height="35">
                {% endif %}
                {{ blog.author.username }} |
                <i class="bi bi-calendar-event"></i> {{ blog.created_at|date:"F d, Y" }}
            </p>
            <p>{{ blog.content|truncatewords:50 }}</p>
            

            {% if request.user == blog.author %}
                <div class="mt-3 d-flex gap-2">
                    <a href="{% url 'blog:update_blog' blog.pk %}" class="text-warning fs-5" title="Edit">
                        <i class="bi bi-pencil-square"></i>
                    </a>
                    <form action="{% url 'blog:delete_blog' blog.pk %}" method="get" onsubmit="return confirm('Are you sure you want to delete this blog?');">
                        <button type="submit" class="btn p-0 text-danger fs-5 border-0 bg-transparent" title="Delete">
                            <i class="bi bi-trash3"></i>
                        </button>
                    </form>
                </div>
            {% endif %}
        </div>
        {% empty %}
        <p>No blogs available.</p>
        {% endfor %}
    </div>
</div>
{% block script %}
<script>
function confirmDelete() {
    return confirm("Are you sure you want to delete this blog?");
}
</script>
{% endblock %}
{% endblock %}
